package com.group.core.sign;

import java.util.Iterator;
import java.util.Map;
import java.util.TreeMap;

public class CopenTest {
	//protected static String testUrl = "http://localhost:8088/copen/router";//ɳ�价�����õ�ַ
	protected static String testUrl = "https://www.hn.10086.cn/open/router";//������õ�ַ
    protected static String appid = "20160617153911";
    protected static String secret = "5QVV2G95SS10RMXIPPLX1ZJSKII0T7DF";
    public static String testUserGet(String Mobilenum ,String App_id, String Download_date){
        TreeMap<String, String> apiparamsMap = new TreeMap<String, String>();
        apiparamsMap.put("format", "json");
        apiparamsMap.put("method", "user.junb.4gspokens");
        apiparamsMap.put("appid",appid);
        apiparamsMap.put("version", "1.0");
        apiparamsMap.put("status", "1");//0-���� 1-���
        apiparamsMap.put("locale","zh_CN");//��Ҫ��ȡ���ֶ�
        apiparamsMap.put("sign_method","MD5");
        apiparamsMap.put("timestamp",Util.getSystemTime("yyyyMMddHHmmssSSS"));
        apiparamsMap.put("Mobilenum",Mobilenum);
        apiparamsMap.put("App_id",App_id);
        apiparamsMap.put("Download_date",Download_date);
        //���ǩ��
        String sign = Util.md5Signature(apiparamsMap,secret);
        apiparamsMap.put("sign", sign);
        StringBuilder param = new StringBuilder();
        for (Iterator<Map.Entry<String, String>> it = apiparamsMap.entrySet()
        .iterator(); it.hasNext();) {
            Map.Entry<String, String> e = it.next();
            param.append("&").append(e.getKey()).append("=").append(e.getValue());
        }
        return param.toString().substring(1);
    }
    
    public static String dataReportTo1086(String Mobilenum ,String App_id, String Download_date){
    	String result = Util.postResult(testUrl,testUserGet(Mobilenum, App_id, Download_date));
        return result;
    }
    
    public static void main(String[] args) {
        String result = Util.postResult(testUrl,testUserGet("13507472170", "12312", "20160629091202"));
        System.out.print(result);
    }
}
